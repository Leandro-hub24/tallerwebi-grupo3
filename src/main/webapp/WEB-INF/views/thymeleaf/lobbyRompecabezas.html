<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Lobby Multijugador</title>
    <script th:src="@{/webjars/sockjs-client/1.5.1/sockjs.min.js}"></script>
    <script th:src="@{/webjars/stomp-websocket/2.3.3/stomp.min.js}"></script>
    <style>
        body { font-family: sans-serif; }
        #listaDePartidas li { padding: 5px; border-bottom: 1px solid #ccc; }
        #listaDePartidas a { margin-left: 20px; }
        .error { color: red; }
    </style>
</head>
<body>

<h2>Lobby de Partidas</h2>

<p th:if="${error}" th:text="|Error: ${error}|" class="error"></p>

<form th:action="@{/partida}" method="POST">
    <input type="text" name="nombrePartida" placeholder="Nombre de tu partida" required>
    <button type="submit">Crear Partida</button>
</form>

<hr>
<h3>Partidas Disponibles:</h3>

<ul id="listaDePartidas">
    <li th:each="partida : ${partidas}" th:id="'partida-' + ${partida.id}">

            <span th:text="${partida.nombre} + ' (Creada por: ' + ${partida.jugador1Nombre} + ')'">
                Nombre de la partida (Creada por: Jugador)
            </span>

        <a th:href="@{/partida/{id}(id=${partida.id})}">Unirse</a>
    </li>
</ul>

<script th:inline="javascript">
    /*<![CDATA[*/
    const wsConnectUrl = /*[[@{/mi-websocket}]]*/ '/mi-websocket';
    const contextPath = /*[[@{/}]]*/ '/'; // Ej: /tallerwebi-base/
    const partidaBaseUrl = /*[[@{/partida/}]]*/ '/partida/';
    /*]]>*/
</script>
<script type="text/javascript" th:src="@{/js/lobbyRompecabezas.js}"></script>
</body>
</html>